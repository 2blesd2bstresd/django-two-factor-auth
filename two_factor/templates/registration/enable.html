{% extends 'base.html' %}
{% load i18n %}

{% block head %}
    {{ wizard.form.media }}
{% endblock %}

{% block content %}
    <p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
    {% if wizard.steps.current == 'welcome' %}
        <p>You are about to take your account security to the next level. Follow
            the steps in this wizard to enable two-factor authorization.</p>
    {% elif wizard.steps.current == 'method' %}
        <p>Please select which authentication method you would like to use.</p>
    {% elif wizard.steps.current == 'generator' %}
        <p>To start using a token generator, please use your smartphone to scan
            the QR code below. For example, use Google Authenticator. Then,
            enter the token generated by the app.</p>

        <img src="{{ qr_url }}" alt="QR Code" />
    {% endif %}

    <form action="" method="post">{% csrf_token %}
        <table>
            {{ wizard.management_form }}
            {% if wizard.form.forms %}
                {{ wizard.form.management_form }}
                {% for form in wizard.form.forms %}
                    {{ form }}
                {% endfor %}
            {% else %}
                {{ wizard.form }}
            {% endif %}
        </table>

        {# hidden submit button to enable [enter] key #}
        <div style="margin-left: -500px"><input type="submit" value=""/></div>

        {% if wizard.steps.prev %}
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">{% trans "Back" %}</button>
        {% endif %}
        <button type="submit">{% trans "Next" %}</button>
    </form>
{% endblock %}
